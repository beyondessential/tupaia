<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="theme-color" content="#000000" />

    <!-- Open Graph for Facebook link preview -->
    <meta property="og:image" content="https://tupaia.org/images/social-preview.jpeg" />
    <meta
      property="og:description"
      content="Data aggregation, analysis, and visualisation for the most remote settings in the world"
    />
    <meta property="og:url" content="https://tupaia.org" />
    <meta property="og:title" content="Tupaia" />

    <% if (process.env.REACT_APP_DEPLOYMENT_NAME === 'master'
    || process.env.REACT_APP_DEPLOYMENT_NAME === 'main'
    || process.env.REACT_APP_DEPLOYMENT_NAME === 'production') { %>
    <!-- Google Analytics -->
    <script>
      (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        (i[r] =
          i[r] ||
          function() {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-100824457-2', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

    <!-- Microsoft Clarity Tracking Code for https://tupaia.org -->
    <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "89ft6ytrun");
    </script>

    <!-- Raygun -->
    <script type="text/javascript">
      !function(a,b,c,d,e,f,g,h){a.RaygunObject=e,a[e]=a[e]||function(){
        (a[e].o=a[e].o||[]).push(arguments)},f=b.createElement(c),g=b.getElementsByTagName(c)[0],
              f.async=1,f.src=d,g.parentNode.insertBefore(f,g),h=a.onerror,a.onerror=function(b,c,d,f,g){
        h&&h(b,c,d,f,g),g||(g=new Error(b)),a[e].q=a[e].q||[],a[e].q.push({
          e:g})}}(window,document,"script","//cdn.raygun.io/raygun4js/raygun.min.js","rg4js");
    </script>
    <script type="text/javascript">
      rg4js('apiKey', 'NZ1gywaMMHfofleGHW58Hw');
      rg4js('enableCrashReporting', true);
      var lastSeenErrorMsg = null;
      rg4js('onBeforeSend', function (payload) {
        // RN-46
        if (payload.Details && payload.Details.Error) {
          if (payload.Details.Error.Message === lastSeenErrorMsg) {
            return false;
          }
          lastSeenErrorMsg = payload.Details.Error.Message;
        }
        return payload;
      });
    </script>
    <% } %>

    <!--
      Record the load time at this point instead of in the javascript as cached resources would make
      load time inconsistent between page loads.
    -->
    <script>
      window.loadTime = Date.now() - window.performance.timing.navigationStart;
    </script>
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" crossorigin="anonymous" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
          integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
          crossorigin=""/>

    <!-- Loading spinner. No need to load this into separate style sheet as that will just add extra network overhead -->
    <style>
      @keyframes spinner {
        to {
          transform: rotate(360deg);
        }
      }
      html {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      body {
        background: #262834;
        font-family: Roboto, sans-serif;
      }
      .spinner:before {
        content: '';
        box-sizing: border-box;
        position: absolute;
        top: 50%;
        left: 50%;
        width: 60px;
        height: 60px;
        margin-top: -30px;
        margin-left: -30px;
        border-radius: 50%;
        border: 5px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        animation: spinner 0.6s linear infinite;
      }
    </style>
    <title>Tupaia</title>
  </head>
  <body>
    <noscript>
      <p style="color:white;">You need to enable JavaScript to run this app.</p>
    </noscript>
    <div id="root"><div class="spinner"></div></div>
  </body>
</html>
