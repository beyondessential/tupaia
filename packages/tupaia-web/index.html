<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="theme-color" content="#000000" />

    <!-- Open Graph for Facebook link preview -->
    <meta property="og:image" content="https://tupaia.org/images/social-preview.jpeg" />
    <meta
      property="og:description"
      content="Data aggregation, analysis, and visualisation for the most remote settings in the world"
    />
    <meta property="og:url" content="https://tupaia.org" />
    <meta property="og:title" content="Tupaia" />

    <% if (process.env.REACT_APP_DEPLOYMENT_NAME === 'master' ||
    process.env.REACT_APP_DEPLOYMENT_NAME === 'main' || process.env.REACT_APP_DEPLOYMENT_NAME ===
    'production') { %>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GH96FJFLWQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-GH96FJFLWQ');
    </script>
    <!-- End Google Analytics -->

    <!-- Microsoft Clarity Tracking Code for https://tupaia.org -->
    <script type="text/javascript">
      (function (c, l, a, r, i, t, y) {
        c[a] =
          c[a] ||
          function () {
            (c[a].q = c[a].q || []).push(arguments);
          };
        t = l.createElement(r);
        t.async = 1;
        t.src = 'https://www.clarity.ms/tag/' + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, 'clarity', 'script', '89ft6ytrun');
    </script>

    <!-- Raygun -->
    <script type="text/javascript">
      !(function (a, b, c, d, e, f, g, h) {
        (a.RaygunObject = e),
          (a[e] =
            a[e] ||
            function () {
              (a[e].o = a[e].o || []).push(arguments);
            }),
          (f = b.createElement(c)),
          (g = b.getElementsByTagName(c)[0]),
          (f.async = 1),
          (f.src = d),
          g.parentNode.insertBefore(f, g),
          (h = a.onerror),
          (a.onerror = function (b, c, d, f, g) {
            h && h(b, c, d, f, g),
              g || (g = new Error(b)),
              (a[e].q = a[e].q || []),
              a[e].q.push({
                e: g,
              });
          });
      })(window, document, 'script', '//cdn.raygun.io/raygun4js/raygun.min.js', 'rg4js');
    </script>
    <script type="text/javascript">
      rg4js('apiKey', 'NZ1gywaMMHfofleGHW58Hw');
      rg4js('enableCrashReporting', true);
      var lastSeenErrorMsg = null;
      rg4js('onBeforeSend', function (payload) {
        // RN-46
        if (payload.Details && payload.Details.Error) {
          if (payload.Details.Error.Message === lastSeenErrorMsg) {
            return false;
          }
          lastSeenErrorMsg = payload.Details.Error.Message;
        }
        return payload;
      });
    </script>
    <% } %>
    <!--
      Record the load time at this point instead of in the javascript as cached resources would make
      load time inconsistent between page loads.
    -->
    <script>
      window.loadTime = Date.now() - window.performance.timing.navigationStart;
    </script>
    <link rel="icon" type="image/png" href="/favicon.ico" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700&display=swap"
      crossorigin="anonymous"
    />
    <title>Tupaia</title>
  </head>
  <style>
      body {
          background: #262834;
          color: white;
      }
  </style>
  <body>
    <noscript>
      <p style="color: white">You need to enable JavaScript to run this app.</p>
    </noscript>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
